<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Теория Алгоритмов Отсечения</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
    <a href="index.html" class="back-button">← Назад</a>

    <div class="theory-container">
        <h1>Теория Алгоритмов Отсечения Отрезков</h1>

        <section>
            <h2>Алгоритм Лианга-Барски</h2>
            <p>Алгоритм Лианга-Барски используется для отсечения отрезков относительно прямоугольного окна отсечения. Он является эффективным методом, поскольку минимизирует количество вычислений по сравнению с другими алгоритмами отсечения.</p>
            
            <h3>Шаги алгоритма:</h3>
            <ol>
                <li>Определите границы окна отсечения: <code>Xmin</code>, <code>Ymin</code>, <code>Xmax</code>, <code>Ymax</code>.</li>
                <li>Для каждого отрезка определите параметры <code>p</code> и <code>q</code>:
                    <ul>
                        <li><code>p1 = -(X2 - X1)</code>, <code>q1 = X1 - Xmin</code></li>
                        <li><code>p2 = X2 - X1</code>, <code>q2 = Xmax - X1</code></li>
                        <li><code>p3 = -(Y2 - Y1)</code>, <code>q3 = Y1 - Ymin</code></li>
                        <li><code>p4 = Y2 - Y1</code>, <code>q4 = Ymax - Y1</code></li>
                    </ul>
                </li>
                <li>Инициализируйте параметры <code>t0 = 0</code> и <code>t1 = 1</code>.</li>
                <li>Для каждого из 4 направлений (лево, право, низ, верх):
                    <ul>
                        <li>Если <code>p = 0</code> и <code>q < 0</code>, отрезок полностью вне границы и его следует отбрасывать.</li>
                        <li>Иначе, вычислите <code>r = q / p</code>.</li>
                        <li>Если <code>p < 0</code> (входная граница), обновите <code>t0 = max(t0, r)</code>.</li>
                        <li>Если <code>p > 0</code> (выходная граница), обновите <code>t1 = min(t1, r)</code>.</li>
                        <li>Если в какой-либо момент <code>t0 > t1</code>, отрезок полностью вне окна отсечения.</li>
                    </ul>
                </li>
                <li>Вычислите новые координаты отсеченного отрезка:</li>
                <ul>
                    <li><code>Xstart = X1 + t0 * (X2 - X1)</code></li>
                    <li><code>Ystart = Y1 + t0 * (Y2 - Y1)</code></li>
                    <li><code>Xend = X1 + t1 * (X2 - X1)</code></li>
                    <li><code>Yend = Y1 + t1 * (Y2 - Y1)</code></li>
                </ul>
            </ol>
        </section>

        <section>
            <h2>Алгоритм Кайруса-Бека</h2>
            <p>Алгоритм Кайруса-Бека предназначен для отсечения отрезков относительно выпуклого многоугольника. Он эффективен для сложных форм окон отсечения и широко используется в компьютерной графике.</p>
            
            <h3>Шаги алгоритма:</h3>
            <ol>
                <li>Определите вершины выпуклого многоугольника в порядке обхода (по часовой или против часовой стрелки).</li>
                <li>Для каждого ребра многоугольника вычислите внешнюю нормаль.</li>
                <li>Инициализируйте параметры <code>tE = 0</code> (максимальное нижнее ограничение) и <code>tL = 1</code> (минимальное верхнее ограничение).</li>
                <li>Для каждого ребра:
                    <ul>
                        <li>Вычислите <code>N · D</code> (скалярное произведение нормали на направление отрезка), где <code>D = (X2 - X1, Y2 - Y1)</code>.</li>
                        <li>Вычислите <code>N · (P - A)</code>, где <code>P = (X1, Y1)</code> (начальная точка отрезка), а <code>A = (X0, Y0)</code> (точка на ребре).</li>
                        <li>Если <code>N · D = 0</code>:
                            <ul>
                                <li>Если <code>N · (P - A) < 0</code>, отрезок полностью вне многоугольника.</li>
                                <li>Иначе, отрезок параллелен ребру и остается без изменений.</li>
                            </ul>
                        </li>
                        <li>В противном случае, вычислите <code>t = - (N · (P - A)) / (N · D)</code>.</li>
                        <li>
                            <ul>
                                <li>Если <code>N · D < 0</code> (отрезок входит в многоугольник), обновите <code>tE = max(tE, t)</code>.</li>
                                <li>Если <code>N · D > 0</code> (отрезок выходит из многоугольника), обновите <code>tL = min(tL, t)</code>.</li>
                            </ul>
                        </li>
                        <li>Если в какой-либо момент <code>tE > tL</code>, отрезок полностью вне многоугольника.</li>
                    </ul>
                </li>
                <li>Вычислите новые координаты отсеченного отрезка:</li>
                <ul>
                    <li><code>Xstart = X1 + tE * (X2 - X1)</code></li>
                    <li><code>Ystart = Y1 + tE * (Y2 - Y1)</code></li>
                    <li><code>Xend = X1 + tL * (X2 - X1)</code></li>
                    <li><code>Yend = Y1 + tL * (Y2 - Y1)</code></li>
                </ul>
            </ol>
        </section>
    </div>
</body>
</html>
